package shlm.lmcs.com.lazycat.LazyShopAct.SystemAct;/** * 你只是喜欢钱而已,而我只是现在没有能力去爱自己爱的人而已。 * 如果有一天,我有能力了。我定当不顾一切 去活自己想活,去爱自己所爱。 * <p> * 再苦  你也得撑下去 */import android.annotation.SuppressLint;import android.os.Bundle;import android.support.annotation.Nullable;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.ListView;import android.widget.TextView;import android.widget.Toast;import com.bumptech.glide.Glide;import com.bumptech.glide.load.engine.DiskCacheStrategy;import shlm.lmcs.com.lazycat.FreightOS.Freight;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.CompanyAct.LazyCatAct;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.CompanyTools.TextUnt;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.Tools;import shlm.lmcs.com.lazycat.LazyShopValues.LocalAction;import shlm.lmcs.com.lazycat.LazyShopValues.LocalValues;import shlm.lmcs.com.lazycat.R;/** * 查看物流的信息窗口 */public class SystemFreight extends LazyCatAct {    private ListView _listview;    private String MSG = "SystemFreight.java[+]";    private ImageView iv_shopimg;/*商品的图片*/    private LocalValues.HTTP_ADDRS http_addrs;    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_freight);        setStatusBar("#ffffff");        /*设置标题*/        TextUnt.with(this, R.id.assembly_act_headTitle).setText("物流信息");        _listview = findViewById(R.id.activity_freight_listView);        http_addrs = new LocalValues.HTTP_ADDRS(getApplicationContext());        iv_shopimg = findViewById(R.id.activity_freightShopimg);/*商品的图片*/        init();    }    /**     * 初始化     */    private void init() {        Freight._pulloutFreight(this, getBundlerValue(LocalAction.ACTION_ORDER._ORDERNUMBER), new Freight.onFreight() {            @SuppressLint("ResourceType")            @Override            public void _onPullOk(Freight.FreightLog _freightLog) {                Log.i(MSG, "获取信息成功");                TextUnt.with(SystemFreight.this, R.id.activity_freightFreightBusiness).setText(_freightLog._freightBusiness);                TextUnt.with(SystemFreight.this, R.id.activity_freightFreightOrdernumber).setText(_freightLog._orderNumber);                TextUnt.with(SystemFreight.this, R.id.activity_freightFreightTel).setText(_freightLog._freightTel);                Glide.with(getApplicationContext()).load(http_addrs.HTTP_ADDR_IMG_URL + _freightLog._shopImg).diskCacheStrategy(DiskCacheStrategy.NONE).skipMemoryCache(false).into(iv_shopimg);                /**                 * 判断状态                 */                switch (_freightLog._freightStatus) {                    case Freight.STATUS_OK:                        /*订单派送完成*/                        TextUnt.with(SystemFreight.this, R.id.activity_freightFreightStatus).setText("派送完成").setTextColor(getResources().getString(R.color.ThemeColor));                        break;                    case Freight.STATUS_PRINT:                        /*订单打印成功*/                        TextUnt.with(SystemFreight.this, R.id.activity_freightFreightStatus).setText("打印完成").setTextColor(getResources().getString(R.color.colorPrice));                        break;                    case Freight.STATUS_DELIVERY:                        /*订单正在配送中*/                        TextUnt.with(SystemFreight.this, R.id.activity_freightFreightStatus).setText("地勤配送中").setTextColor(getResources().getString(R.color.colorPrice));                        break;                    case Freight.STATUS_SEND:                        /*物流提交完成*/                        TextUnt.with(SystemFreight.this, R.id.activity_freightFreightStatus).setText("提交成功").setTextColor(getResources().getString(R.color.colorPrice));                        break;                }                _listview.setAdapter(new freightAdapter(_freightLog));            }            @Override            public void _onPullError() {            }        });    }    class freightAdapter extends BaseAdapter {        private Freight.FreightLog _logs;        public freightAdapter(Freight.FreightLog _log) {            this._logs = _log;        }        @Override        public int getCount() {            return this._logs.ar_msg.size();        }        @Override        public Object getItem(int position) {            return null;        }        @Override        public long getItemId(int position) {            return 0;        }        @SuppressLint("ResourceType")        @Override        public View getView(int position, View convertView, ViewGroup parent) {            Values values;            if (convertView != null) {                values = (Values) convertView.getTag();            } else {                convertView = LayoutInflater.from(getApplicationContext()).inflate(R.layout.item_freight_msg, null,                        false);                values = new Values();                values.ig_freightSpot = convertView.findViewById(R.id.item_freight_msg_IcoFreightin);                values._time = convertView.findViewById(R.id.item_freight_msg_FreightTime);                values._msg = convertView.findViewById(R.id.item_freight_msg_FreightMsg);                convertView.setTag(values);            }            /*判断是否在顶部*/            if (position == 0) {                /*判断是否已经收件  已经收件就显示收件了*/                if (this._logs.ar_msg.get(position)._status.equals(Freight.STATUS_OK)) {                    values.ig_freightSpot.setImageDrawable(Tools.setSvgColor(getApplicationContext(),                            R.drawable.ico_freight_done, "#08c299"));                } else {                    values.ig_freightSpot.setImageDrawable(Tools.setSvgColor(getApplicationContext(),                            R.drawable.ico_freightspot_first, "#08c299"));                }                TextUnt.with(values._time).setTextColor(getResources().getString(R.color.ThemeColor)).setText(this._logs.ar_msg.get(position)._time);                TextUnt.with(values._msg).setTextColor(getResources().getString(R.color.ThemeColor)).setText(this._logs.ar_msg.get(position)._msg);            } else {                values.ig_freightSpot.setImageDrawable(Tools.setSvgColor(getApplicationContext(),                        R.drawable.ico_freightspot, "#efefef"));                TextUnt.with(values._time).setTextColor("#b7b4b8").setText(this._logs.ar_msg.get(position)._time);                TextUnt.with(values._msg).setTextColor("#b7b4b8").setText(this._logs.ar_msg.get(position)._msg);            }            return convertView;        }        class Values {            ImageView ig_freightSpot;            View line_freight;            TextView _time;            TextView _msg;        }    }}