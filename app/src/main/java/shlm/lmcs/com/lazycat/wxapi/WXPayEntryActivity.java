package shlm.lmcs.com.lazycat.wxapi;import android.annotation.SuppressLint;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.ImageView;import android.widget.RelativeLayout;import com.tencent.mm.opensdk.constants.ConstantsAPI;import com.tencent.mm.opensdk.modelbase.BaseReq;import com.tencent.mm.opensdk.modelbase.BaseResp;import com.tencent.mm.opensdk.openapi.IWXAPI;import com.tencent.mm.opensdk.openapi.IWXAPIEventHandler;import com.tencent.mm.opensdk.openapi.WXAPIFactory;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.CompanyAct.LazyCatAct;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.CompanyTools.TextUnt;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.Tools;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.WxPay.Utils;import shlm.lmcs.com.lazycat.R;public class WXPayEntryActivity extends LazyCatAct implements IWXAPIEventHandler {    private IWXAPI wxapi;    @SuppressLint("ResourceType")    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setStatusBar(getResources().getString(R.color.colorPaywindowBack));        setContentView(R.layout.activity_wxpayentry);        wxapi = WXAPIFactory.createWXAPI(this, Utils.app_id);        wxapi.handleIntent(getIntent(), this);        init();        listener();    }    /**     * 按键监听事件     */    @SuppressLint("ResourceType")    private void listener() {        /**         * 退出的监听事件         */        findViewById(R.id.assembly_act_headBackImg).setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                finish();            }        });        /**         * 我已知晓的按钮监听         */        TextUnt.with(this, R.id.activity_wxpayentry_btnUserknow).setBackground(Tools                .CreateDrawable(1, getResources().getString(R.color.colorPaywindowBack),                        getResources().getString(R.color.colorPaywindowBack), 5)).setOnClick(new View.OnClickListener() {            @Override            public void onClick(View v) {                finish();            }        });    }    @SuppressLint({"NewApi"})    private void init() {        ImageView backImg = findViewById(R.id.assembly_act_headBackImg);        backImg.setImageDrawable(Tools.setSvgColor(getApplicationContext(), R.drawable.ico_back,                "#ffffff"));        /*设置支付信息列表框的样式*/        RelativeLayout layout = findViewById(R.id.activity_wxpayentry_Msgbody);        layout.setBackground(Tools.CreateDrawable(1, "#ffffff", "#ffffff", 10));    }    @Override    protected void onNewIntent(Intent intent) {        super.onNewIntent(intent);        setIntent(intent);        wxapi.handleIntent(intent, this);    }    @Override    public void onReq(BaseReq baseReq) {    }    @Override    public void onResp(BaseResp resp) {        if (resp.getType() == ConstantsAPI.COMMAND_PAY_BY_WX) {            switch (resp.errCode) {                case 0:                    /*支付成功*/                    TextUnt.with(this, R.id.activity_wxpayentry_payStatus).setText("支付成功");                    TextUnt.with(this, R.id.activity_wxpayentry_payMsg).setText(getResources()                            .getString(R.string.payOkmsg));                    break;                case -1:                    TextUnt.with(this, R.id.activity_wxpayentry_payStatus).setText("支付成功");                    TextUnt.with(this, R.id.activity_wxpayentry_payMsg).setText(getResources()                            .getString(R.string.payErrmsg));                    /*支付失败*/                    break;                case -2:                    TextUnt.with(this, R.id.activity_wxpayentry_payStatus).setText("取消支付");                    TextUnt.with(this, R.id.activity_wxpayentry_payMsg).setText(getResources()                            .getString(R.string.payCanclemsg));                    /*取消支付*/                    break;            }        }    }}