package shlm.lmcs.com.lazycat.SuperSystemOS;import android.os.Bundle;import android.renderscript.Sampler;import android.support.annotation.Nullable;import android.support.v4.widget.TextViewCompat;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.ListView;import android.widget.TextView;import android.widget.Toast;import com.bumptech.glide.Glide;import com.bumptech.glide.load.engine.DiskCacheStrategy;import java.util.ArrayList;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.CompanyAct.LazyCatAct;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.CompanyTools.TextUnt;import shlm.lmcs.com.lazycat.LazyCatProgramUnt.Tools;import shlm.lmcs.com.lazycat.LazyShopValues.LocalAction;import shlm.lmcs.com.lazycat.LazyShopValues.LocalValues;import shlm.lmcs.com.lazycat.R;import shlm.lmcs.com.lazycat.SuperSystemOS.SuperSystemclass.PullBusinespickshops;/** * 获取传入的商家代码获取全部的商品信息 */public class Pickshops extends LazyCatAct {    private String _code;    private ListView _listview;    private String MSG = "Pickshops.java[+]";    private LocalValues.HTTP_ADDRS http_addrs;    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        setContentView(R.layout.activity_superpickshops);        http_addrs = new LocalValues.HTTP_ADDRS(getApplicationContext());        /*获取哪个商家代码*/        _code = getBundlerValue(LocalAction.ACTION_SUPERBUSINESS._BUSINESSCODE);        Log.i(MSG, "获取传入的商家代码:" + _code);        _listview = findViewById(R.id.activity_superpickshopsListView);        listener();        init();        super.onCreate(savedInstanceState);    }    /**     * 初始化     */    private void init() {        /**         * 拉取数据信息         */        PullBusinespickshops._pull(Pickshops.this, _code, new PullBusinespickshops.onPickShops() {            @Override            public void _onGet(ArrayList<PullBusinespickshops.PickShops> _pickshops,                               PullBusinespickshops.BueinssPages _businesspage) {/*                TextUnt.with(Pickshops.this, R.id.item_superbusinessBueinssname).setText(_businesspage._businessname);*//*                TextUnt.with(Pickshops.this, R.id.item_superbusinessTel).setText(_businesspage._businesstel);*//*                TextUnt.with(Pickshops.this, R.id.item_superbusinessPayhow).setText(_businesspage._businesspayhow +                        "件");*//*                TextUnt.with(Pickshops.this, R.id.item_superbusinessTotal).setText(_businesspage._businesstotal + "元");*/                Pickadapter _Pickadapter = new Pickadapter(_pickshops);                Toast.makeText(getApplicationContext(), "合计取货数据:" + _pickshops.size(), Toast.LENGTH_LONG).show();                _listview.setAdapter(_Pickadapter);            }            @Override            public void _onError() {            }        });    }    /**     * 监听事件     */    private void listener() {    }    /**     * 适配器     */    class Pickadapter extends BaseAdapter {        private ArrayList<PullBusinespickshops.PickShops> _pickshops;        public Pickadapter(ArrayList<PullBusinespickshops.PickShops> pickshops) {            this._pickshops = pickshops;        }        @Override        public int getCount() {            return this._pickshops.size();        }        @Override        public Object getItem(int position) {            return null;        }        @Override        public long getItemId(int position) {            return 0;        }        @Override        public View getView(final int position, View convertView, ViewGroup parent) {            final Values values;            if (convertView != null) {                values = (Values) convertView.getTag();            } else {                values = new Values();                convertView = LayoutInflater.from(getApplicationContext()).inflate(R.layout.item_superpickshop, null,                        false);                values._how = convertView.findViewById(R.id.item_superpickshopPayhow);                values._title = convertView.findViewById(R.id.item_superpickshopTitle);                values._spec = convertView.findViewById(R.id.item_superpickshopSpec);                values._tp = convertView.findViewById(R.id.item_superpickshopTp);                values._showbody = convertView.findViewById(R.id.item_superpickshopshowBody);                values._close = convertView.findViewById(R.id.item_superpickshopBtnclose);                values._img = convertView.findViewById(R.id.item_superpickshopImg);                values._integral = convertView.findViewById(R.id.item_superpickshopIntegral);                convertView.setTag(values);            }            TextUnt.with(values._title).setText(this._pickshops.get(position)._title);            TextUnt.with(values._spec).setText(this._pickshops.get(position)._company + "装:" + this._pickshops.get(position)._spec + this._pickshops.get(position)._splitunit);            TextUnt.with(values._how).setText("待取货:" + this._pickshops.get(position)._payhow + "件");            TextUnt.with(values._tp).setText("单件批价:" + this._pickshops.get(position)._tp + "元");            TextUnt.with(values._integral).setText("单件积分:" + this._pickshops.get(position)._integral);            Glide.with(getApplicationContext()).load(http_addrs.HTTP_ADDR_PROGRAM_IMGSERVICE + this._pickshops.get(position)._img).diskCacheStrategy(DiskCacheStrategy.NONE).skipMemoryCache(false).into(values._img);            /*设置样式*/            values._showbody.setBackground(Tools.CreateDrawable(1, "#ffffff", "#ffffff", 10));            values._showbody.setOnClickListener(new View.OnClickListener() {                @Override                public void onClick(View v) {                    LazyCatStartActivityWithBundler(PickshopinforUser.class, false,                            LocalAction.ACTION_SHOPVALUES.ACTION_SHOPVALUES_ONLYID, _pickshops.get(position)._onlyId);                }            });            return convertView;        }        public class Values {            TextView _title;            TextView _how;            TextView _spec;/*规格*/            TextView _tp;/*批发价格*/            TextView _integral;/*积分*/            ImageView _img;/*图片*/            ImageView _close;/*关闭*/            LinearLayout _showbody;        }    }    @Override    protected void onRestart() {        init();        super.onRestart();    }}